# SmartAir：基于MCP与RAG的智能航空客服系统

## 项目概述

随着人工智能技术的飞速发展，特别是大语言模型（LLM）在自然语言理解和生成方面的突破，智能客服正成为提升企业服务效率与降低运营成本的关键手段。在航空服务领域，传统客服系统存在响应速度慢、知识更新不及时、人工成本高等问题，难以满足日益增长的乘客需求和多样化服务场景。

SmartAir系统将前沿的MCP（Model Context Protocol，模型上下文协议）与RAG（Retrieval-Augmented Generation，检索增强生成）技术相结合，打造一个高效、智能、具备知识记忆与实时检索能力的航空客服系统。通过这些技术的融合，系统能够动态访问外部知识库（如航班状态、退改签政策、用户历史记录等），为生成回答提供事实支撑，提升准确性和可靠性。

## 主要功能

系统整体功能围绕以下三类核心角色展开：

### 用户端
- 通过自然语言对话完成航班查询、改签退票、行李政策咨询等操作
- 基于RAG技术实时从航空数据库中检索最新政策或数据
- 借助MCP实现跨场景使用外部工具的能力
- 用户身份识别（手机号、订单号等），提供个性化服务
- 智能调用乘客历史航班记录、会员状态等信息，提供定制化建议

### 客服端
- 智能判断并处理AI无法解决的异常请求
- 灵敏的"人工转接"机制，在必要时无缝转接
- 快速查看完整对话记录与用户信息，避免重复沟通
- 会话管理工具，包括实时消息监控、快速回复选项

### 管理端
- 统一后台管理知识库内容、配置提示词
- 管理模型行为和监控系统运行效果
- 上传和更新航空服务相关文档（如退改签政策、航班信息等）
- 调整模型上下文参数，实现多轮对话的连贯控制
- 分析用户对话日志和系统反馈，持续优化AI表现
- 权限控制与敏感信息监管功能

## 技术栈

### 前端技术
- **核心框架**：Vue 3 + Composition API
- **UI设计**：针对乘客、客服和管理员三类用户的专属界面
- **数据通信**：Axios（RESTful API请求封装、拦截与错误处理）
- **状态管理**：Pinia（对话记录暂存、用户信息保持和页面状态同步）
- **功能特点**：
  - 乘客端：聊天窗口为核心，多轮对话和实时消息展示
  - 客服端：会话管理工具，实时消息监控，快速回复，转人工接入
  - 管理员端：知识文档维护，提示词配置，权限管理，系统日志查看

### 后端技术
- **开发框架**：Spring Boot
- **数据访问**：MyBatis（高效SQL操作，灵活映射数据结构）
- **架构设计**：MVC架构，AOP实现统一日志记录、安全控制和异常处理

### 数据库技术
- **关系型数据库**：MySQL
  - 存储内容：用户基础信息、航班订单记录、会话索引、系统日志、配置项
  - 特点：保证数据完整性和一致性，支持复杂查询和事务操作
  
- **非关系型数据库**：MongoDB
  - 存储内容：多轮对话文本、航空知识文档、提示词模板
  - 特点：支持灵活JSON格式，易于存储管理非规则或动态变化数据
  
- **向量数据库**：Redis Stack
  - 存储内容：知识文本的高维语义向量表示
  - 算法：HNSW索引算法支持近似最近邻(ANN)搜索
  - 特点：内存数据库，提供极低延迟和高吞吐

## 技术实现亮点

### 智能服务与实际业务深度融合
- 自然语言交互作为核心入口，降低用户操作门槛
- "智能优先+人工兜底+人控知识"的协作机制
- AI智能检测问题难度，必要时自动转接人工客服
- 管理员可实时更新知识库，确保AI回答的专业性和实时性

### 基于MCP与RAG的对话增强机制
- MCP协议打破传统AI系统数据接入局限
- 系统可灵活接入多种信息源（知识文档、数据库、历史记录等）
- RAG技术实现"先检索、再生成"的答案生成流程
- 语义向量匹配定位相关知识，确保回答有据可依
- 特别适用于航空服务这样知识密集、规则明确的场景

### 三种数据架构协同的存储策略
- 混合型数据架构满足不同类型数据管理需求
- 原始文本与向量数据分离存储提升检索效率
- 知识更新时自动重新生成向量表示并同步索引
- 结合高性能向量检索确保快速响应用户查询